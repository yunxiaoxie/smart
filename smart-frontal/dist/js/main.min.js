"use strict";function FormDirectiveFactory(t){return["$log",function(e){return{restrict:"EA",replace:!0,scope:!1,templateUrl:function(t,i){var r=t.context.localName;return r&&r.indexOf("select")!==-1?"html/qk-select.html":r&&r.indexOf("radio")!==-1?"html/qk-radio.html":r&&r.indexOf("checkbox")!==-1?"html/qk-checkbox.html":r&&r.indexOf("date")!==-1?"html/qk-date-picker.html":(e.error("Not supported type:",r),"")},controllerAs:"$ctrl",bindToController:{required:"@",model:"@"},controller:["$log",function(e){this.getData=function(){return"YN"===t?[{id:"Y",label:"是"},{id:"N",label:"否"}]:"MW"===t?[{id:"M",label:"男"},{id:"W",label:"女"}]:"radio"===t?[{id:1,label:"显示"},{id:0,label:"隐藏"}]:"checkbox"===t?[{id:1,name:"看书",model:"formData.intrest.book"},{id:2,name:"跑步",model:"formData.intrest.play"},{id:3,name:"打球",model:"formData.intrest.ball"}]:(e.error("Not supported key:",t),null)},this.format="yyyy-MM-dd",this.popup={opened:!1},this.open=function(){this.popup.opened=!0}}]}}]}angular.module("iRestApp",["ngMessages","ui.bootstrap","iRestApp.basicServer"]),angular.module("iRestApp.basicServer",[]).controller("FormCtrl",["$scope","$filter","$http",function(t,e,i){t.submitted=!1,t.isShow=function(e){return t.submitted||e.$dirty},t.submit=function(){t.submitted=!0,i.post("http://127.0.0.1:3000/formSave",t.formData).success(function(t){alert(JSON.stringify(t))}).error(function(t){alert("failure message:"+JSON.stringify({data:t}))})}}]).directive("qkSelectSex",FormDirectiveFactory("MW")).directive("qkSelectYn",FormDirectiveFactory("YN")).directive("qkRadio",FormDirectiveFactory("radio")).directive("qkCheckbox",FormDirectiveFactory("checkbox")).directive("qkDatePicker",FormDirectiveFactory("date")).directive("timeDuration",function(){var t="<div class='input-inline'>             <input class='form-control' type='text' ng-model='num' />             <select class='form-control' ng-model='unit'>                 <option value='seconds'>Seconds</option>                 <option value='minutes'>Minutes</option>                 <option value='hours'>Hours</option>                 <option value='days'>Days</option>             </select>            </div>";return{restrict:"E",template:t,require:"ngModel",replace:!0,link:function(t,e,i,r){var n={seconds:1,minutes:60,hours:3600,days:86400},o=["seconds","minutes","hours","days"];r.$formatters.push(function(t){var e,i,r="minutes",a=0;for(t=parseInt(t||0),e=o.length-1;e>=0;e--)if(i=o[e],t%n[i]===0){r=i;break}return t&&(a=t/n[r]),{unit:r,num:a}}),r.$parsers.push(function(t){var e,i=t.unit,r=t.num;return e=n[i],r*e}),t.$watch("unit + num",function(){r.$setViewValue({unit:t.unit,num:t.num})}),r.$render=function(){r.$viewValue||(r.$viewValue={unit:"hours",num:1}),t.unit=r.$viewValue.unit,t.num=r.$viewValue.num}}}}).directive("chaValid",["$timeout",function(t){return{require:"ngModel",link:function(e,i,r,n){var o;e.$watch(r.ngModel,function(e){return e?(t.cancel(o),void(o=t(function(){var t,i=/[`~!@#$%^&*()+<>?:"{},.\/;\='[\]]/im;return t=!i.test(e),n.$setValidity("chaValid",t),t?e:void 0},300))):void n.$setValidity("chaValid",!0)})}}}]).directive("qkModel",["$compile",function(t){var e="qk-model";return{restrict:"A",terminal:!0,priority:1e5,controller:["$scope","$element","$attrs","$parse",function(t,i,r,n){this.getData=function(){return r.hassubscope&&"true"===r.hassubscope?"$parent."+n(i.attr(e))(t):n(i.attr(e))(t)}}],link:function(i,r,n,o){var a=o.getData(),u=a?a:r.attr(e);r.removeAttr(e),r.attr("ng-model",u),t(r)(i)}}}]);