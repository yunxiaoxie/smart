"use strict";function FormDirectiveFactory(e){return["$log",function(t){return{restrict:"EA",replace:!0,scope:!1,templateUrl:function(e,r){var i=e.context.localName;return i&&i.indexOf("select")!==-1?"html/qk-select.html":i&&i.indexOf("radio")!==-1?"html/qk-radio.html":i&&i.indexOf("checkbox")!==-1?"html/qk-checkbox.html":(t.error("Not supported type:",i),"")},controllerAs:"$ctrl",bindToController:{required:"@",model:"@"},controller:["$log",function(t){this.getData=function(){return"YN"===e?[{id:"Y",label:"是"},{id:"N",label:"否"}]:"MW"===e?[{id:"M",label:"男"},{id:"W",label:"女"}]:"radio"===e?[{id:1,label:"显示"},{id:0,label:"隐藏"}]:"checkbox"===e?[{id:1,name:"看书",model:"formData.intrest.book"},{id:2,name:"跑步",model:"formData.intrest.play"},{id:3,name:"打球",model:"formData.intrest.ball"}]:(t.error("Not supported key:",e),null)}}]}}]}angular.module("iRestApp",["ngMessages","ui.bootstrap","iRestApp.basicServer"]),angular.module("iRestApp.basicServer",[]).controller("FormCtrl",["$scope","$filter","$http",function(e,t,r){e.submitted=!1,e.isShow=function(t){return e.submitted||t.$dirty},e.submit=function(){e.submitted=!0,r.post("http://127.0.0.1:3000/formSave",e.formData).success(function(e){alert(JSON.stringify(e))}).error(function(e){alert("failure message:"+JSON.stringify({data:e}))})}}]).directive("qkSelectSex",FormDirectiveFactory("MW")).directive("qkSelectYn",FormDirectiveFactory("YN")).directive("qkRadio",FormDirectiveFactory("radio")).directive("qkCheckbox",FormDirectiveFactory("checkbox")).directive("qkDatePicker",function(){return{restrict:"EA",replace:!0,scope:!1,templateUrl:"html/qk-date-picker.html",controller:["$scope",function(e){e.dat=new Date,e.format="yyyy-MM-dd",e.popup={opened:!1},e.open=function(){e.popup.opened=!0},e.disabled=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())}}]}}).directive("chaValid",["$timeout",function(e){return{require:"ngModel",link:function(t,r,i,o){var n;t.$watch(i.ngModel,function(t){return t?(e.cancel(n),void(n=e(function(){var e,r=/[`~!@#$%^&*()+<>?:"{},.\/;\='[\]]/im;return e=!r.test(t),o.$setValidity("chaValid",e),e?t:void 0},300))):void o.$setValidity("chaValid",!0)})}}}]).directive("qkModel",["$compile",function(e){var t="qk-model";return{restrict:"A",terminal:!0,priority:1e5,controller:["$scope","$element","$attrs","$parse",function(e,r,i,o){this.getData=function(){return i.hassubscope&&"true"==i.hassubscope?"$parent."+o(r.attr(t))(e):o(r.attr(t))(e)}}],link:function(r,i,o,n){var a=n.getData(),c=a?a:i.attr(t);i.removeAttr(t),i.attr("ng-model",c),e(i)(r)}}}]);