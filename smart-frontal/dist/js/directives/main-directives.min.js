function FormDirectiveFactory(){return["$log",function(t){return{restrict:"EA",scope:!0,replace:!0,templateUrl:function(e,n){var r=e[0].localName;return r&&r.indexOf("select")!==-1?"html/share/qk-select.html":r&&r.indexOf("radio")!==-1?"html/share/qk-radio.html":r&&r.indexOf("checkbox")!==-1?"html/share/qk-checkbox.html":r&&r.indexOf("date")!==-1?"html/share/qk-date-picker.html":(t.error("Not supported type:",r),"")},controllerAs:"vm",bindToController:{required:"=",model:"="},controller:["$scope","$element","$attrs","$log","UtilsService",function(t,e,n,r,i){this.getData=function(){n.code&&i.querySync("/getDataByCode",{code:n.code}).then(function(e){t.data=e},function(){r.error("Not supported code:",n.code)})},this.format="yyyy-MM-dd",this.popup={opened:!1},this.open=function(){this.popup.opened=!0},this.disabled=function(t,e){return"day"===e&&(0===t.getDay()||6===t.getDay())}}]}}]}angular.module("iRestApp.mainDirectives",[]).directive("qkSelect",FormDirectiveFactory()).directive("qkRadio",FormDirectiveFactory()).directive("qkCheckbox",FormDirectiveFactory()).directive("qkDatePicker",FormDirectiveFactory()).directive("timeDuration",function(){var t="<div class='input-inline'>             <input class='form-control' type='text' ng-model='num' />             <select class='form-control' ng-model='unit'>                 <option value='seconds'>Seconds</option>                 <option value='minutes'>Minutes</option>                 <option value='hours'>Hours</option>                 <option value='days'>Days</option>             </select>            </div>";return{restrict:"E",template:t,require:"ngModel",replace:!0,link:function(t,e,n,r){var i={seconds:1,minutes:60,hours:3600,days:86400},o=["seconds","minutes","hours","days"];r.$formatters.push(function(t){var e,n,r="minutes",a=0;for(t=parseInt(t||0),e=o.length-1;e>=0;e--)if(n=o[e],t%i[n]===0){r=n;break}return t&&(a=t/i[r]),{unit:r,num:a}}),r.$parsers.push(function(t){var e,n=t.unit,r=t.num;return e=i[n],r*e}),t.$watch("unit + num",function(){r.$setViewValue({unit:t.unit,num:t.num})}),r.$render=function(){r.$viewValue||(r.$viewValue={unit:"hours",num:1}),t.unit=r.$viewValue.unit,t.num=r.$viewValue.num}}}}).directive("charValid",[function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(r.$validators.charValid=function(t,e){var n=/[`~!@#$%^&*()+<>?:"{},.\/;\='[\]]/im;return!n.test(t)})}}}]).directive("noDuplicate",[function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(r.$validators.noDuplicate=function(e,r){if(t.formData){var i=t.formData.list,o=[],a=n.name;if(i){var u=_.keys(i);_.each(u,function(t,n){t===a?o.push(e):o.push(i[t])})}if(o.length!==_.uniq(o).length)return!1}return!0})}}}]).directive("noRepeat",[function(){return{require:"ngModel",link:function(t,e,n,r){var i=[];t.$watch(n.ngModel,function(e){if(!(t.formData.domain_addr_pairs&&t.formData.domain_addr_pairs.length<=1))return i=_.pluck(t.formData.domain_addr_pairs,"domain"),i.length==_.uniq(i).length?void r.$setValidity("noRepeat",!0):void r.$setValidity("noRepeat",!1)})}}}]).directive("myMinLength",function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("myminlength",function(t){i=parseInt(t)||0,r.$validate()}),r.$validators.myminlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}}).directive("ipMatch",[function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(r.$validators.ipmatch=function(t,e){var n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return r.$isEmpty(e)||n.test(t)})}}}]).directive("qkModel",["$compile",function(t){var e="qk-model";return{restrict:"A",terminal:!0,priority:1e5,controller:["$scope","$element","$attrs","$parse",function(t,n,r,i){this.getData=function(){return r.hassubscope&&"true"===r.hassubscope?(console.log(i(n.attr(e))(t)),"$parent."+i(n.attr(e))(t)):i(n.attr(e))(t)}}],link:function(n,r,i,o){var a=o.getData(),u=a?a:r.attr(e);r.removeAttr(e),r.attr("ng-model",u),t(r)(n)}}}]);